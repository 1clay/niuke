# 牛客 操作系统-9

1. 基本分页存储机制
   基本分页存储机制具有一次性和驻留性的特点。

   - 一次性：将所有作业一次性全部装入内存之后再运行； 
   - 驻留性：装入内存的作业在执行前，会一直驻留在内存中 

2. 请求分页存储机制
   请求分页存储机制是为了实现存储虚拟化，增加了请求调页和页面置换的功能。

   - 请求调页：在进程执行过程中，如果要访问**不在内存中的页面**，可以使用请求调页功能调入中断，动态的装入需要访问的页面。

   - 置换功能：当内存空间已满，但是又需要装入新的页面时，可以使用页面置换功能调出某个页面，以装入需要调入的新页面。

     为了实现请求调页存储，需要的硬件支持：

   - 页表机制——主要作用为：**将用户空间中的逻辑地址映射到内存空间中的物理地址**

   - 缺页中断机构

   - 地址变换机构

1.进程控制块的作用 

进程控制块是进程实体的一部分，是操作系统中最重要的记录型数据结构。PCB中记录了操作系统所需要的、用于描述进程情况及控制进程运行所需要的全部信
息。进程控制块的作用，是使一个在多道程序环境下不能独立进行的程序（含数据），成为一个能独立运行的基本单位，一个能与其他进程并发执行的进程。或者
说，操作系统是根据PCB来对并发执行的进程进行控制和管理。 

2.进程控制块中的内容 

在进程控制块中，主要包括4个方面内容。 

（1）进程标识符信息。进程标识符用于惟一地标识一个进程。一个进程，通常有以下两个标识符：外部标识符，内部标识符。

（2）处理机状态信息。处理机状态信息主要是由处理机各种寄存器中的内容所组成。

（3）进程一调度信息。在PCB中还存放了一些与进程调度和进程对换有关的信息，包括：进程状态、进程优先级、进程调度所需要的其他信息、事件。

（4）进程控制信息。进程控制信息包括：程序和数据的地址、进程同步和通信机制、资源清单、链接指针。 

3.PCB的组织方式 

在一个系统中，通常可拥有数十个、数百个乃至数千个PCB，为能对它们进行有效管理，应该用适当的方式将它们组织起来，目前，常见的组织方式有两种，链接方式和索引方式。

**长程调度**，又称为作业调度或高级调度，这种调度将已进入系统并处于后备状态的作业按某种算法选择一个或一批，为其建立进程，并进入主机，当该作业执行完毕时，还负责回收系统资源，在批处理系统中，需要有作业调度的过程，以便将它们分批地装入内存，在分时系统和实时系统中，通常不需要长期调度。它的频率比较低，主要用来控制内存中进程的数量。 

**中程调度**，又称为交换调度。它的核心思想是能将进程从内存或从CPU竞争中移出，从而降低多道程序设计的程度，之后进程能被重新调入内存，并从中断处继续执行，这种交换的***作可以调整进程在内存中的存在数量和时机。其主要任务是按照给定的原则和策略，将处于外存交换区中的就绪状态或等待状态的进程调入内存，或把处于内存就绪状态或内存等待状态的进程交换到外存交换区。 

**短程调度**，又称为进程调度、低级调度或微观调度。这也是通常所说的调度，一般情况下使用最多的就是短期调度。它的主要任务是按照某种策略和算法将处理机分配给一个处于就绪状态的进程，分为抢占式和非抢占式。 可以从下图中清晰的看到这些调度之间的区别。 

unix: 

（1）管道（Pipe）：管道可用于具有亲缘关系进程间的通信，允许一个进程和另一个与它有共同祖先的进程之间进行通信。 

（2）命名管道（named pipe）：命名管道克服了管道没有名字的限制，因此，除具有管道所具有的功能外，它还允许无亲缘关系进程间的通信。命名管道在文件系统中有对应的文件名。命名管道通过命令mkfifo或系统调用mkfifo来创建。 

（3）信号（Signal）：信号是比较复杂的通信方式，用于通知接受进程有某种事件发生，除了用于进程间通信外，进程还可以发送信号给进程本身；linux除了支持Unix早期信号语义函数sigal外，还支持语义符合Posix.1标准的信号函数sigaction（实际上，该函数是基于BSD的，BSD为了实现可靠信号机制，又能够统一对外接口，用sigaction函数重新实现了signal函数）。 

（4）消息（Message）队列：消息队列是消息的链接表，包括Posix消息队列system V消息队列。有足够权限的进程可以向队列中添加消息，被赋予读权限的进程则可以读走队列中的消息。消息队列克服了信号承载信息量少，管道只能承载无格式字节流以及缓冲区大小受限等缺 

（5）共享内存：使得多个进程可以访问同一块内存空间，是最快的可用IPC形式。是针对其他通信机制运行效率较低而设计的。往往与其它通信机制，如信号量结合使用，来达到进程间的同步及互斥。 

（6）内存映射（mapped memory）：内存映射允许任何多个进程间通信，每一个使用该机制的进程通过把一个共享的文件映射到自己的进程地址空间来实现它。 

（7）信号量（semaphore）：主要作为进程间以及同一进程不同线程之间的同步手段。 

（8）套接口（Socket）：更为一般的进程间通信机制，可用于不同机器之间的进程间通信。起初是由Unix系统的BSD分支开发出来的，但现在一般可以移植到其它类Unix系统上：Linux和System V的变种都支持套接字。(以上为引用） 

管程机制：是一个数据结构和能为并发进程所执行的一组操作，这组操作能同步进程和改变管程中的数据。（360）

多级反馈队列调度算法
1.设置多级就绪队列，各级队列优先级从高到低，时间片从小到大
2.新进程到达时先进入第1级队列，按FCFS原则排队等候被分配时间片，若用完时间片进程还未结束，则进程进入下一级队列队尾，如果此时已经时在最下级的队列，则重新放回该队列队尾