# 牛客 操作系统-10

缓冲技术解决的是两个互相协作的设备之间速度差异的协调问题。如果没有缓冲，则较高速度的设备需要暂停来等待速度较低的设备。有了缓冲，这种等待就可以降低或消除。

产生死锁的条件：
互斥条件
请求和保持条件
不可抢占条件
循环等待条件
根据题目给出的从资源供给上解决死锁的条件，所以每个进程均差一个资源的情况下形成僵持，即A（1个资源）、B（2两个资源）、C（3个资源）的情况下，只要再加1个资源即不会产生死锁，1+2+3+1=7

1. **独享设备：**在一个用户作业未完成或退出之前，此设备不能分配给其他作业用。所有字符设备都是独享设备。如输入机、磁带机、打印机等。——很明显：需要装驱动。
2. **共享设备：**多个用户作业或多个进程可以“同时”从这些设备上存取信息。软硬盘、光盘等块设备都是共享设备。——无需驱动。
3. **虚拟设备：**通过软件技术将**独享设备**改造成共享设备。例如：通过SPOOLing技术将一台打印机虚拟成多台打印机。——实质还是独享设备，需要驱动。

系统中的资源可以分为两类，一类是可剥夺资源，是指某进程在获得这类资源后，该资源可以再被其他进程或系统剥夺。例如，优先权高的进程可以剥夺优先权低的进程的 处理机 。又如，内存区可由 存储器管理 程序，把一个进程从一个存储区移到另一个存储区，此即剥夺了该进程原来占有的存储区，甚至可将一进程从内存调到外存上，可见CPU 和 主存 均属于可剥夺性资源。另一类资源是不可剥夺资源，当系统把这类资源分配给某进程后，再不能强行收回，只能在进程用完后自行释放，如 磁带机 、打印机等。

产生死锁的原因主要是：
（1） 因为系统资源不足。
（2） 进程运行推进的顺序不合适。
（3） 资源分配不当等。
如果系统资源充足，进程的资源请求都能够得到满足，死锁出现的可能性就很低，否则
就会因争夺有限的资源而陷入死锁。其次，进程运行推进顺序与速度不同，也可能产生死锁。
产生死锁的四个必要条件：
（1） 互斥条件：一个资源每次只能被一个进程使用。
（2） 请求与保持条件：一个进程因请求资源而阻塞时，对已获得的资源保持不放。
（3） 不剥夺条件:进程已获得的资源，在末使用完之前，不能强行剥夺。
（4） 循环等待条件:若干进程之间形成一种头尾相接的循环等待资源关系。
这四个条件是死锁的必要条件，只要系统发生死锁，这些条件必然成立，而只要上述条件之
一不满足，就不会发生死锁。
死锁的解除与预防：
理解了死锁的原因，尤其是产生死锁的四个必要条件，就可以最大可能地避免、预防和
解除死锁。所以，在系统设计、进程调度等方面注意如何不让这四个必要条件成立，如何确
定资源的合理分配算法，避免进程永久占据系统资源。此外，也要防止进程在处于等待状态
的情况下占用资源。因此，对资源的分配要给予合理的规划。
常说的 16 位、32 位、64 位等，都指的是计算机的字长，字长表示 CPU 一次操作可以处理的二进制位数，它决定了指针数据的大小。

线程共享的环境包括：进程代码段、进程的公有数据(利用这些共享的数据，线程很容易的实现相互之间的通讯)、进程打开的文件描述符、信号的处理器、进程的当前目录和进程用户ID与进程组ID。

非共享的包括：线程ID，寄存器组的值，线程的堆栈，错误返回码， 线程的信号屏蔽码， 线程的优先级

当一个文件系统含有多级目录时，每访问一个文件，都要使用从树根开始到树叶为止、包括各中间结点名的全路径名。当前目录又称工作目录，进程对各个文件的访问都相对于当前目录进行，而不需要从根目录一层一层的检索，加快了文件的检索速度。选项AB都与相对目录无关；选项D，文件的读/写速度取决于磁盘的性能。

IO系统分类的层次通常是5层。列举如下： 用户层IO软件、 设备独立性软件、 设备驱动程序、 中断处理程序、 硬件 1.设备独立性软件： 用于实现用户程序与设备驱动器的统一接口、设备命令、设备保护，以及设备分配与释放等，同时也为设备管理和数据传送提供必要的存储空间。 2.设备驱动程序：硬件相关，具体实现OS对设备发出的操作指令，驱动IO设备工作。每一类设备有一个设备驱动程序。 3.中断处理主要进行的是上下文任务的切换，测试中断信号，读取设备状态，修改进程状态。

无论是在批处理系统还是分时系统中，用户进程数一般都多于处理机数、这将导致它们互相争夺处理机。另外，系统进程也同样需要使用处理机。这就要求进程调度程序按一定的策略，动态地把处理机分配给处于就绪队列中的某一个进程，以使之执行。所以，进程调度关键问题就是调度算法的选择

这里将操作系统的功能分模块化更清晰
操作系统的功能可大致分为：处理器管理（进程管理，调度），存储器管理，设备管理和文件管理

A 内存分配 是存储器管理中的功能：内存分配，内存保护，地址映射，内存扩充
B 时间片的确定， 是进程调度——时间片轮转法 或 结合了此调度算法的一个标量， 用来表示每次被调度后，此进程在CPU上可运行的最长指令周期
C 调度算法的选择 是进程调度（处理器管理 ——> 调度{作业调度，进程调度}）中最核心的内容
D I/O设备的分配是设备管理中的功能：缓冲管理，设备分配，设备处理